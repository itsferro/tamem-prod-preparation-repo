<div class="content-explainer-container">
    <div class="header">
      <h2>Content Explainer - Storyboard Generator</h2>
      <p>Generate a storyboard based on lesson images for Block ID: <strong>{{ blockId || 'Not provided' }}</strong></p>
    </div>
  
    <div class="input-section">
      <div class="button-group">
        <button 
          class="generate-btn"
          (click)="generateContent()"
          [disabled]="isLoading || !blockId || blockId <= 0"
        >
          <span *ngIf="!isLoading">Generate Storyboard</span>
          <span *ngIf="isLoading" class="loading-text">
            <i class="spinner"></i>
            Generating...
          </span>
        </button>
        
        <button 
          class="clear-btn"
          (click)="clearContent()"
          [disabled]="isLoading"
        >
          Clear Content
        </button>
      </div>
    </div>
  
    <div class="error-message" *ngIf="error">
      <i class="error-icon">‚ö†Ô∏è</i>
      {{ error }}
    </div>
  
    <div class="content-section" *ngIf="storyboardContent">
      <div class="content-header">
        <h3>Generated Storyboard</h3>
        <span class="block-id-label">Block ID: {{ blockId }}</span>
      </div>
      
      <div class="text-viewer">
        <pre class="storyboard-content" style="direction:rtl;text-align:right;">{{ storyboardContent }}</pre>
      </div>
    </div>
  
    <div class="empty-state" *ngIf="!storyboardContent && !isLoading && !error">
      <div class="empty-icon">üìö</div>
      <p *ngIf="blockId && blockId > 0">Click "Generate Storyboard" to create content for Block ID: {{ blockId }}</p>
      <p *ngIf="!blockId || blockId <= 0">No valid Block ID provided. Please provide a valid Block ID to generate storyboard content.</p>
    </div>
  
    <!-- Debug info (remove in production) -->
    <div class="debug-info" style="background: #f0f0f0; padding: 10px; margin-top: 20px; font-size: 12px; border-radius: 4px;" *ngIf="true">
      <strong>Debug Info:</strong><br>
      Block ID: {{ blockId }}<br>
      Is Loading: {{ isLoading }}<br>
      Has Error: {{ !!error }}<br>
      Content Length: {{ storyboardContent?.length || 0 }}<br>
      Error Message: {{ error || 'None' }}
    </div>
  </div>