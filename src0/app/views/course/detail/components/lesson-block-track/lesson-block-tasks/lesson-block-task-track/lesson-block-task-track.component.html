<div class="modal-content">
  <div class="modal-header">
    <h4 class="modal-title">
      <i class="fas fa-project-diagram me-2"></i>
      {{ (currentTask?.title || 'Loading...') | uppercase }}
    </h4>
    <button type="button" class="btn-close" aria-label="Close" (click)="onCancel()"></button>
  </div>

  <div class="modal-body">



    <!-- Task Information -->
    <div class="task-info-header mb-4">
      <div class="d-flex align-items-start">
        <div class="task-icon me-4">
          <i class="fas fa-file-text fa-2x"></i>
        </div>
        <div class="flex-grow-1">
          <!-- <h5 class="task-title mb-3">Content Development</h5> -->
          
          <!-- Navigation Breadcrumb -->
          <div class="breadcrumb-nav">
            <span class="breadcrumb-item breadcrumb-course">
              <i class="fas fa-graduation-cap me-1"></i>
              {{ courseName }}
            </span>
            <span class="breadcrumb-separator">
              <i class="fas fa-chevron-right"></i>
            </span>
            <span class="breadcrumb-item breadcrumb-lesson">
              <i class="fas fa-book-open me-1"></i>
              {{ lessonName }}
            </span>
            <span class="breadcrumb-separator">
              <i class="fas fa-chevron-right"></i>
            </span>
            <span class="breadcrumb-item breadcrumb-block">
              <i class="fas fa-cube me-1"></i>
              {{ blockName }}
            </span>
          </div>
          
          <!-- Quick Links -->
          <div class="task-links">
            <a [href]="canvaLink" target="_blank" class="link-badge canva">
              <i class="fab fa-canva"></i>
              Canva Design
            </a>
            <a [href]="googleDriveLink" target="_blank" class="link-badge drive">
              <i class="fab fa-google-drive"></i>
              Google Drive
            </a>
            <a [href]="storyBoardLink" target="_blank" class="link-badge storyboard">
              <i class="fas fa-film"></i>
              Storyboard
            </a>
          </div>
          
          <!-- Task Meta Info -->
          <div class="task-meta">
            <div class="meta-item assigned-user">
              <i class="fas fa-user"></i>
              Assigned to:  {{ currentTask.assignedToUserName }}
            </div>
     
            
            <div class="meta-item estimated-time">
              <i class="fas fa-clock"></i>
              {{ currentTask.estimatedWorkingMinutes }} min
            </div>



            <div class="meta-item estimated-points">
              <i class="fas fa-bullseye"></i>
              {{ currentTask.estimatedPoints }} points
            </div>

          </div>
        </div>
      </div>
    </div>










    <!-- Status Flowchart Component -->
    @if(currentTask){
    <detail-lesson-block-task-track-flow [taskId]="currentTask?.id">
    </detail-lesson-block-task-track-flow>

    }






    <!-- Actions Component -->
    @if(currentTask){
    <detail-lesson-block-task-track-actions [currentTask]="currentTask" [selectedStatus]="selectedStatus"
      (actionSelected)="onActionSelected($event)" (actionSubmitted)="onActionSubmitted($event)"
      (actionCancelled)="onActionCancelled()">
    </detail-lesson-block-task-track-actions>
    }



    <!-- Task Log History -->
    <!-- Status Flowchart Component -->
    @if(currentTask){
    <detail-lesson-block-task-track-history [taskId]="currentTask?.id">
    </detail-lesson-block-task-track-history>
    }

  </div>

  <div class="modal-footer">
    <div class="d-flex justify-content-between w-100">
      <div>
        <small class="text-muted">
          <i class="fas fa-info-circle me-1"></i>
          Click on status nodes to see available actions
        </small>
      </div>
      <div>
        <button type="button" class="btn btn-secondary" (click)="onCancel()">
          Close
        </button>
      </div>
    </div>
  </div>

</div>